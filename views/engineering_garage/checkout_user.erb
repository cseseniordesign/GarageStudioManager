<h1 class="dcf-txt-h3" id="Checkout">Warehouse Check In / Check Out</h1>
<form class="dcf-form">
<fieldset class="dcf-h-min-100vh dcf-mt-4">
  <legend>User Details</legend>
  <div class="dcf-d-flex dcf-flex-col dcf-gap-2">
		<div class="dcf-d-flex dcf-flex-row dcf-jc-between dcf-ai-baseline dcf-w-100% dcf-gap-2">
			<div class="dcf-d-inline-flex dcf-flex-row dcf-ai-baseline dcf-gap-4">
				<h3><%= user[:username] %></h3>
				<a href="/checkout" class="dcf-btn dcf-btn-tertiary" type="button">Clear</a>
			</div>
			<div class="dcf-d-flex dcf-gap-2">
				<button class="dcf-btn-toggle-modal dcf-btn dcf-btn-primary" data-toggles-modal="checkout-modal-btn" type="button">Check Out Tool</button>
					<div class="dcf-modal" id="checkout-modal-btn" hidden>
						<div class="dcf-modal-wrapper">
							<div class="dcf-modal-header">
								<h2>Check Out Tool</h2>
								<button class="dcf-btn-close-modal">Close</button>
							</div>
							<div class="dcf-modal-content">
								Hey, I am a modal!
							</div>
						</div>
					</div>
				<a href="/checkout/project/<%= nuid %>/create" class="dcf-btn dcf-btn-primary">Create New Project</a>
			</div>
		</div>
		<div hidden>
			<label for="barcode-input">Scan Barcode</label>
			<div class="dcf-input-group dcf-w-25%" >
				<input id="barcode-input">
				<button class="dcf-btn dcf-btn-primary" type="submit">Submit</button>
			</div>
		</div>
    <div class="dcf-tabs dcf-tabs-responsive">
			<ul>
				<li><a href="#user-projects-panel">User Projects</a></li>
				<li><a href="#user-tools-panel">Tool Check In</a></li>
  		</ul>
      <div id="user-projects-panel">
        <% if defined?(projects) && projects.count > 0 %>
					<h4>User Projects</h4>
          <table class="dcf-table dcf-w-100% dcf-table-striped dcf-table-responsive dcf-mt-6 dcf-mb-6" aria-describedby="project-list-table">
            <thead>
              <tr>
                <th scope="col">Location</th>
                <th scope="col">Project Name</th>
                <th scope="col">Last Accessed</th>
                <th scope="col" class="dcf-txt-right">Project Actions</th>
              </tr>
            </thead>
            <tbody>
              <% projects.each do |project| %>
                <tr>
                  <td><%= project[:bin_id] %></td>
                  <td><%= project[:title] %></td>
                  <td><%= project[:last_checked_out] %></td>
                  <td class="dcf-d-flex dcf-flex-row-rev dcf-flex-shrink-1 dcf-gap-2">
                    <button class="dcf-btn-toggle-modal dcf-btn dcf-btn-primary" data-toggles-modal="checkout-<%= project[:id] %>" type="button">Check Out</button>
										<a href="/checkout/project/<%= project[:id] %>/edit" class="dcf-btn dcf-btn-primary">Edit</a>
                    <div class="dcf-modal" id="edit-<%= project[:id] %>" hidden>
                      <div class="dcf-modal-wrapper">
                        <div class="dcf-modal-header">
                          <h2>Edit <%= project[:name] %></h2>
                          <button class="dcf-btn-close-modal">Close</button>
                        </div>
                        <div class="dcf-modal-content">
                          <%= project[:description] %>
                        </div>
                      </div>
                    </div>
                    <div class="dcf-modal" id="checkout-<%= project[:id] %>" hidden>
                      <div class="dcf-modal-wrapper">
                        <div class="dcf-modal-header">
                          <h2>Check Out <%= project[:name] %></h2>
                          <button class="dcf-btn-close-modal">Close</button>
                        </div>
                        <div class="dcf-modal-content">
                          <%= project[:description] %>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <p>No projects found.</p>
        <% end %>
      </div>
      <div id="user-tools-panel">
				<h4>Checked Out Tools</h4>
        <% if checked_out.count > 0 %>
          <table class="dcf-table dcf-w-100% dcf-table-striped dcf-table-responsive dcf-mt-6 dcf-mb-6" aria-describedby="project-list-table">
            <thead>
              <tr>
                <th scope="col">Tool Name</th>
                <th scope="col">Checked Out</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              <% checked_out.each do |tool| %>
                <tr>
                  <td><%= tool[:name] %></td>
                  <td><%= tool[:checked_out_date] %></td>
                  <td class="table-actions">
                    <button class="dcf-btn-toggle-modal dcf-btn dcf-btn-primary" data-toggles-modal="checkin-<%= tool[:id] %>" type="button">Check In</button>
                    <div class="dcf-modal" id="checkin-<%= tool[:id] %>" hidden>
                      <div class="dcf-modal-wrapper">
                        <div class="dcf-modal-header">
                          <h2>Check In Tool</h2>
                          <button class="dcf-btn-close-modal">Close</button>
                        </div>
                        <div class="dcf-modal-content">
                          Hello, I am a modal!
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <p>Currently no tools checked out.</p>
        <% end %>
      </div>
    </div>
		<script>
			window.addEventListener('inlineJSReady', function() {
				WDN.initializePlugin('tabs');
			}, false);
		</script>
  </div>
</fieldset>
</form>