<h1 class="dcf-txt-h3" id="Checkout">Warehouse Check In / Check Out</h1>
<form class="dcf-form dcf-w-25%" id="find-nuid">
<div class="dcf-form-group">
	<div class="dcf-form-controls-inline dcf-gap-2">
		<label for="form-nuid">Scan NUID or Bin Barcode</label>
		<input id="form-nuid" tabindex="1" type="text" required />
		<button id="search-btn" tabindex="2" class="dcf-btn dcf-btn-primary">Search</button>
	</div>
</div>
</form>
<fieldset class="dcf-h-min-100vh dcf-mt-4">
  <legend>User Details</legend>
  <div class="dcf-d-flex dcf-flex-col dcf-gap-2">
		<div class="dcf-d-flex dcf-flex-row dcf-jc-between dcf-ai-baseline dcf-w-100% dcf-gap-2">
			<h4>Ethan Eckhardt</h4>
			<div class="dcf-d-flex dcf-gap-2">
				<button class="dcf-btn-toggle-modal dcf-btn dcf-btn-primary" data-toggles-modal="checkout-modal-btn" type="button">Check Out Tool</button>
					<div class="dcf-modal" id="checkout-modal-btn" hidden>
						<div class="dcf-modal-wrapper">
							<div class="dcf-modal-header">
								<h2>Check Out Tool</h2>
								<button class="dcf-btn-close-modal">Close</button>
							</div>
							<div class="dcf-modal-content">
								Hey, I am a modal!
							</div>
						</div>
					</div>
				<a href="/checkout/new_project/user" class="dcf-btn dcf-btn-primary">Create New Project</a>
			</div>
		</div>
    <div class="dcf-grid dcf-col-gap-vw">
      <div class="dcf-col-50%">
        <% if defined?(projects) && projects.count > 0 %>
          <table class="dcf-table dcf-w-100% dcf-table-striped dcf-table-responsive dcf-mt-6 dcf-mb-6" aria-describedby="project-list-table">
            <caption>User Projects</caption>
            <thead>
              <tr>
                <th scope="col">Location</th>
                <th scope="col">Project Name</th>
                <th scope="col">Last Accessed</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              <% projects.each do |project| %>
                <tr>
                  <td><%= project[:location] %></td>
                  <td><%= project[:name] %></td>
                  <td><%= project[:last_accessed] %></td>
                  <td class="table-actions">
                    <button class="dcf-btn-toggle-modal dcf-btn dcf-btn-primary" data-toggles-modal="checkout-<%= project[:id] %>" type="button">Check Out</button>
                    <div class="dcf-modal" id="checkout-<%= project[:id] %>" hidden>
                      <div class="dcf-modal-wrapper">
                        <div class="dcf-modal-header">
                          <h2>Check Out <%= project[:name] %></h2>
                          <button class="dcf-btn-close-modal">Close</button>
                        </div>
                        <div class="dcf-modal-content">
                          <%= project[:description] %>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <p>No projects found.</p>
        <% end %>
      </div>
      <div class="dcf-col-50%">
        <% if checked_out.count > 0 %>
          <table class="dcf-table dcf-w-100% dcf-table-striped dcf-table-responsive dcf-mt-6 dcf-mb-6" aria-describedby="project-list-table">
            <caption>Checked Out Tools</caption>
            <thead>
              <tr>
                <th scope="col">Tool Name</th>
                <th scope="col">Checked Out</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              <% checked_out.each do |tool| %>
                <tr>
                  <td><%= tool[:name] %></td>
                  <td><%= tool[:checked_out_date] %></td>
                  <td class="table-actions">
                    <button class="dcf-btn-toggle-modal dcf-btn dcf-btn-primary" data-toggles-modal="checkin-<%= tool[:id] %>" type="button">Check In</button>
                    <div class="dcf-modal" id="checkin-<%= tool[:id] %>" hidden>
                      <div class="dcf-modal-wrapper">
                        <div class="dcf-modal-header">
                          <h2>Check In Tool</h2>
                          <button class="dcf-btn-close-modal">Close</button>
                        </div>
                        <div class="dcf-modal-content">
                          Hello, I am a modal!
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <p>Currently no tools checked out.</p>
        <% end %>
      </div>
    </div>
  </div>
</fieldset>
