<section class="wdn-grid-set reverse">
    <div class="bp2-wdn-col-three-fourths">
        <div id="pagetitle">
        <h3>Events</h3>
        </div>
        <div class="event-page">
            <table class="event-list">
                <thead class="small-hidden">
                    <tr>
                        <th>Title</th>
                        <th>Date/Location</th>
                        <th>Signups</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                <% events.each do |event| %>
                    <tr>
                        <td class="small-hidden">
                            <a href="/admin/events/<%= event.id %>/edit/"><%= event.title %></a>
                        </td>
                        <td>
                            <ul>
                                <li>
                                    <%= event.start_time.in_time_zone.strftime('%m/%d/%Y @ %l:%M %P') %><br>
                                    <%= event.location.name %>
                                </li>
                            </ul>
                        </td>
                        <td>
                            <a href="/admin/events/<%= event.id %>/signup_list/"><%= event.signups.count %> signed up</a>
                        </td>
                        <td>
                        <form class="delete-event delete-form" action="/admin/events/<%=event.id%>/delete/" method="POST">
                        <button type="submit" class="wdn-button">Delete</button>
                        </form>
                        </td>
                    </tr>
                <% end %>
                </tbody>
            </table>
        </div>
    </div>
    <nav class="bp2-wdn-col-one-fourth">
        <div class="toolbox">
            <h3>Toolbox</h3>
            <div class="tools">
                <div style="text-align: center; margin-bottom: .8em">
                    <a class="wdn-button wdn-button-brand" href="/admin/events/create/">
                    <span style="font-size: 2em; vertical-align: middle; font-weight: 600">+</span>
                    <span style="vertical-align: middle;">New Event</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>
</section>

<script type="text/javascript">
require(['jquery'], function($) {
    $(document).ready(function() {
        $('.delete-event').submit(function (submit) {
            if (!window.confirm('Are you sure you want to delete this event?')) {
                submit.preventDefault();
            }
        });
    });
});
</script>